{% extends "layout.html" %}

{% block title %}Dashboard Admin - LemonContest{% endblock %}

{% block content %}
    <h2 class="text-center mb-4">Dashboard Admin</h2>
    
    <form method="POST" action="/add_participant" class="mb-4">
        <h3>Aggiungi Partecipante</h3>
        <div class="mb-3">
            <label for="name" class="form-label">Nome</label>
            <input type="text" id="name" name="name" class="form-control" required>
        </div>
        <div class="mb-3">
            <label for="surname" class="form-label">Cognome</label>
            <input type="text" id="surname" name="surname" class="form-control" required>
        </div>
        <div class="mb-3">
            <label for="tickets" class="form-label">Biglietti</label>
            <input type="number" id="tickets" name="tickets" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">Aggiungi</button>
    </form>

    <h3>Partecipanti Correnti</h3>
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>Nome</th>
                <th>Cognome</th>
                <th>Biglietti</th>
                <th>Azioni</th>
            </tr>
        </thead>
        <tbody>
            {% for partecipante in partecipanti %}
            <tr>
                <td>{{ partecipante['name'] }}</td>
                <td>{{ partecipante['surname'] }}</td>
                <td>{{ partecipante['tickets'] }}</td>
                <td>
                    <!-- Pulsante per rimuovere il partecipante -->
                    <form method="POST" action="{{ url_for('remove_participant', id=partecipante['id']) }}" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm">Rimuovi</button>
                    </form>
                    <!-- Aggiungi biglietti -->
                    <form method="POST" action="{{ url_for('add_tickets', id=partecipante['id']) }}" style="display:inline;">
                        <input type="number" name="additional_tickets" min="1" placeholder="Aggiungi" required>
                        <button type="submit" class="btn btn-success btn-sm">Aggiungi Biglietti</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <a href="/logout" class="btn btn-danger">Logout</a>
{% endblock %}
